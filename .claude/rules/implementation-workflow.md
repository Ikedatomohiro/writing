# Implementation Workflow Rules

## 必須工程

新しい機能を実装する際は、必ず以下の工程を順番に実行すること。

### 1. spec.md の作成

実装内容を明確にするための仕様書を作成する。

**含めるべき内容**:
- 機能の目的・背景
- 要件（機能要件・非機能要件）
- 入出力の定義
- 制約事項
- 成功基準

**配置場所**: `design/` または該当機能のディレクトリ内

### 2. plan.md の作成

spec.md に基づいて実装計画を作成する。

**含めるべき内容**:
- 実装ステップの詳細
- 影響を受けるファイル・モジュール
- 依存関係
- テスト計画
- リスクと対策

### 3. task.md の作成

plan.md に基づいて具体的なタスクリストを作成する。

**含めるべき内容**:
- 実行すべきタスクの一覧
- 各タスクの完了条件
- タスク間の依存関係
- 優先順位

**spec.md との照合**:
- [ ] すべての要件がタスクでカバーされているか
- [ ] 成功基準を満たすタスク構成になっているか
- [ ] 漏れている要件がないか

**不足があった場合**:
- 不足しているタスクを追加してspec.mdを満たすようにする
- 必要に応じてspec.mdやplan.mdを見直す

### 4. 既存実装との整合性確認

実装を開始する前に、以下を確認する。

- [ ] 既存のアーキテクチャと矛盾がないか
- [ ] 既存のコーディング規約に従っているか
- [ ] 既存のAPIやインターフェースとの互換性
- [ ] 重複した実装がないか

**矛盾が見つかった場合**:
- 矛盾点を明確に記録する
- 既存実装または新規spec/planを修正する
- 修正後、再度整合性を確認する

### 5. 実装開始

すべての確認が完了したら、task.mdに従って実装を進める。

- タスクを順番に実行する
- 完了したタスクにチェックを入れる
- 問題が発生したらspec.md/plan.md/task.mdを見直す

## ワークフロー図

```
要件定義 → spec.md作成 → plan.md作成 → task.md作成 → 整合性確認 → 実装開始
```

## 例外

以下の場合はこのワークフローを省略可能:

- バグ修正（軽微なもの）
- ドキュメントの更新のみ
- 設定ファイルの変更のみ
