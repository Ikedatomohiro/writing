# 構造チェックリスト

## 上下関係（階層構造）

### ディレクトリ配置

```
app/                 # 最上位: UIレイヤー
  components/        # UIコンポーネント
  hooks/             # カスタムフック
lib/                 # 中間層: ビジネスロジック
  services/          # サービス層
  repositories/      # データアクセス層
utils/               # 最下位: ユーティリティ
```

| チェック項目 | 確認内容 |
|-------------|---------|
| 機能配置 | 新規ファイルは適切なディレクトリに配置されているか |
| 依存方向 | 上位層から下位層への依存のみか（app → lib → utils） |
| 循環参照 | モジュール間に循環参照がないか |

### 依存関係の原則

- **OK**: `app/components` → `lib/services` → `utils`
- **NG**: `utils` → `lib/services`（下位から上位への依存）
- **NG**: `lib/a` ↔ `lib/b`（循環参照）

## 並列関係（同階層の整合性）

### 同階層モジュールの条件

| チェック項目 | 確認内容 |
|-------------|---------|
| 抽象度 | 同階層のモジュールは同じ抽象度か |
| 責務分離 | 各モジュールの責務が明確に分離されているか |
| 命名規則 | 同階層で命名規則が統一されているか |

### 例: 適切な並列関係

```
services/
  user_service.py      # ユーザー関連のビジネスロジック
  article_service.py   # 記事関連のビジネスロジック
  auth_service.py      # 認証関連のビジネスロジック
```

- 同じ抽象度（すべてサービス層）
- 同じ命名規則（`*_service.py`）
- 責務が明確に分離

### 例: 不適切な並列関係

```
services/
  user_service.py      # サービス層
  database.py          # インフラ層（抽象度が異なる）
  constants.py         # ユーティリティ（抽象度が異なる）
```

## 確認手順

1. **新規ファイルの配置確認**
   - 既存の類似ファイルはどこにあるか
   - その配置は機能ドメインに沿っているか

2. **依存関係の確認**
   - import文を確認し、依存方向が適切か
   - 新規の依存関係が循環を生まないか

3. **同階層との整合性確認**
   - 同じディレクトリ内の他ファイルと比較
   - 命名、構造、責務が一貫しているか
